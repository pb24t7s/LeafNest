<!-- Products Section -->
    <section id="products" class="products">
        <div class="products-container">
            <h2 class="section-title">Our Fresh Microgreens</h2>
            <div class="products-grid">
                <!-- All 11 product cards would go here with cart integration -->
                <!-- For brevity, showing structure for one product -->
                <div class="product-card">
                    <img src="images/products/radish-microgreens.jpg" alt="Fresh Radish Microgreens" class="product-image">
                    <h3>Radish Microgreens</h3>
                    <p>Spicy and peppery flavor that adds a kick to salads, sandwiches, and garnishes.</p>
                    <ul class="product-features">
                        <li>High in Vitamin C</li>
                        <li>Bold, spicy flavor</li>
                        <li>Perfect for garnishing</li>
                    </ul>
                    
                    <div class="nutrition-calculator">
                        <h4 class="calculator-title">üßÆ Nutrition Calculator</h4>
                        <div class="calculator-controls">
                            <div class="control-group">
                                <label class="control-label">Quantity</label>
                                <select class="calculator-select" id="radish-quantity" onchange="calculateNutrition('radish')">
                                    <option value="25">25g</option>
                                    <option value="50">50g</option>
                                    <option value="100">100g</option>
                                    <option value="200">200g</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Mineral/Vitamin</label>
                                <select class="calculator-select" id="radish-mineral" onchange="calculateNutrition('radish')">
                                    <option value="vitamin-c">Vitamin C</option>
                                    <option value="vitamin-k">Vitamin K</option>
                                    <option value="folate">Folate</option>
                                    <option value="iron">Iron</option>
                                    <option value="calcium">Calcium</option>
                                    <option value="fiber">Fiber</option>
                                </select>
                            </div>
                        </div>
                        <div class="nutrition-result" id="radish-result">
                            <span class="result-value">150</span><span class="result-unit">mg Vitamin C</span>
                        </div>
                    </div>

                    <div class="add-to-cart-section">
                        <div class="quantity-selector-cart">
                            <label>Select Quantity & Price:</label>
                            <select id="radish-cart-quantity">
                                <option value="25">25g - ‚Çπ45</option>
                                <option value="50">50g - ‚Çπ80</option>
                                <option value="100">100g - ‚Çπ145</option>
                                <option value="200">200g - ‚Çπ275</option>
                            </select>
                        </div>
                        <button class="add-to-cart-btn" onclick="addToCart('radish', 'Radish Microgreens', 'üå∂Ô∏è')">
                            üõí Add to Cart
                        </button>
                    </div>
                </div>
                <!-- Repeat for all other products... -->
            </div>
        </div>
    </section>

    <!-- Custom Blend Calculator Section -->
    <section class="custom-blend">
        <div class="custom-blend-container">
            <div class="blend-intro">
                <h2>üåø Create Your Custom Mix</h2>
                <p>Design your perfect microgreen blend! Select your favorite varieties, adjust the percentages, and see the nutritional breakdown of your custom mix.</p>
            </div>
            
            <div class="blend-calculator">
                <div class="blend-controls">
                    <div class="microgreens-selection">
                        <!-- Microgreen controls would go here -->
                    </div>
                    
                    <div class="blend-results">
                        <h3 class="results-title">Your Custom Blend</h3>
                        <div class="quantity-selector">
                            <label>Quantity: </label>
                            <select id="blend-quantity" onchange="updateBlendNutrition()">
                                <option value="25">25g</option>
                                <option value="50">50g</option>
                                <option value="100">100g</option>
                                <option value="200">200g</option>
                            </select>
                        </div>
                        <div class="blend-summary" id="blend-summary">
                            Select microgreens to create your blend
                        </div>
                        <div class="nutrition-display">
                            <div class="nutrition-item">
                                <div class="nutrient-name">Vitamin C</div>
                                <div class="nutrient-value" id="blend-vitamin-c">0 mg</div>
                            </div>
                            <!-- More nutrition items... -->
                        </div>
                        <button class="create-blend-btn" onclick="createCustomOrder()">Make Custom Blend</button>
                        <button class="blend-add-to-cart" onclick="addCustomBlendFromCalculator()" id="blendCartBtn">
                            üõí Add Custom Blend to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us, Nutrition, About, Testimonials, Contact sections... -->
    <!-- (Include all other sections from original) -->

    <!-- Cart Overlay -->
    <div class="cart-overlay" id="cartOverlay" onclick="closeCart()"></div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3 class="cart-title">Your Cart</h3>
            <button class="cart-close" onclick="closeCart()">√ó</button>
        </div>
        
        <div class="cart-content">
            <div class="cart-empty" id="cartEmpty">
                <div class="cart-empty-icon">üõí</div>
                <h3>Your cart is empty</h3>
                <p>Add some fresh microgreens to get started!</p>
            </div>
            
            <div class="cart-items" id="cartItems" style="display: none;">
                <!-- Cart items will be dynamically generated here -->
            </div>
        </div>
        
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-summary">
                <div class="cart-total-row">
                    <span>Subtotal:</span>
                    <span id="cartSubtotal">‚Çπ0</span>
                </div>
                <div class="cart-total-row">
                    <span>Delivery:</span>
                    <span id="cartDelivery">‚Çπ30</span>
                </div>
                <div class="cart-total-row final">
                    <span>Total:</span>
                    <span id="cartTotal">‚Çπ30</span>
                </div>
            </div>
            
            <div class="cart-actions">
                <button class="cart-btn cart-btn-primary" onclick="proceedToCheckout()">
                    üì± Order via WhatsApp
                </button>
                <button class="cart-btn cart-btn-secondary" onclick="clearCart()">
                    üóëÔ∏è Clear Cart
                </button>
            </div>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div class="cart-message success" id="cartMessage">
        <span>‚úÖ</span>
        <span id="cartMessageText">Item added to cart!</span>
    </div>

    <script>
        // ===== CART SYSTEM JAVASCRIPT =====
        
        // Pricing data (‚Çπ prices for Indian market)
        const pricingData = {
            radish: { 25: 45, 50: 80, 100: 145, 200: 275 },
            pea: { 25: 50, 50: 90, 100: 165, 200: 310 },
            sunflower: { 25: 55, 50: 100, 100: 180, 200: 340 },
            purple: { 25: 60, 50: 110, 100: 195, 200: 370 },
            broccoli: { 25: 65, 50: 115, 100: 210, 200: 395 },
            arugula: { 25: 55, 50: 95, 100: 175, 200: 330 },
            kale: { 25: 60, 50: 105, 100: 190, 200: 360 },
            beetroot: { 25: 50, 50: 85, 100: 155, 200: 295 },
            mustard: { 25: 45, 50: 80, 100: 145, 200: 275 },
            cilantro: { 25: 40, 50: 70, 100: 125, 200: 235 },
            wheatgrass: { 25: 35, 50: 60, 100: 110, 200: 205 }
        };

        // Product display names and icons
        const productInfo = {
            radish: { name: 'Radish Microgreens', icon: 'üå∂Ô∏è' },
            pea: { name: 'Pea Shoots', icon: 'üü¢' },
            sunflower: { name: 'Sunflower Microgreens', icon: 'üåª' },
            purple: { name: 'Purple Cabbage', icon: 'üü£' },
            broccoli: { name: 'Broccoli Microgreens', icon: 'ü•¶' },
            arugula: { name: 'Arugula Microgreens', icon: 'üåø' },
            kale: { name: 'Kale Microgreens', icon: 'ü•¨' },
            beetroot: { name: 'Beetroot Microgreens', icon: 'üü§' },
            mustard: { name: 'Mustard Microgreens', icon: 'üåø' },
            cilantro: { name: 'Cilantro Microgreens', icon: 'üåø' },
            wheatgrass: { name: 'Wheat Grass', icon: 'üåæ' }
        };

        // Nutrition data for calculators
        const nutritionData = {
            'radish': {
                'vitamin-c': { value: 300, unit: 'mg' }, 'protein': { value: 3.8, unit: 'g' }, 'iron': { value: 1.8, unit: 'mg' }, 'fiber': { value: 2.2, unit: 'g' },
                'vitamin-k': { value: 120, unit: 'mcg' }, 'folate': { value: 95, unit: 'mcg' }, 'calcium': { value: 52, unit: 'mg' }
            },
            // Add all other nutrition data...
        };

        // Cart state
        let cart = [];
        let cartTotal = 0;
        const deliveryFee = 30;

        // Cart Management Functions
        function addToCart(productId, productName, productIcon, customBlend = null) {
            let quantity, price, itemName;
            
            if (customBlend) {
                quantity = customBlend.quantity;
                price = calculateCustomBlendPrice(customBlend);
                itemName = `Custom Blend (${quantity}g)`;
            } else {
                const quantityElement = document.getElementById(`${productId}-cart-quantity`);
                if (!quantityElement) {
                    showCartMessage('Quantity selector not found!', 'error');
                    return;
                }
                
                quantity = parseInt(quantityElement.value);
                price = pricingData[productId][quantity];
                itemName = `${productName} (${quantity}g)`;
            }

            const existingItemIndex = cart.findIndex(item => 
                item.id === (customBlend ? 'custom-blend' : productId) && 
                item.quantity === quantity &&
                JSON.stringify(item.customBlend) === JSON.stringify(customBlend)
            );

            if (existingItemIndex > -1) {
                cart[existingItemIndex].count += 1;
                cart[existingItemIndex].totalPrice = cart[existingItemIndex].count * price;
            } else {
                const cartItem = {
                    id: customBlend ? 'custom-blend' : productId,
                    name: itemName,
                    icon: customBlend ? 'üåø' : productIcon,
                    quantity: quantity,
                    price: price,
                    count: 1,
                    totalPrice: price,
                    customBlend: customBlend
                };
                cart.push(cartItem);
            }

            updateCartUI();
            showCartMessage(`${itemName} added to cart!`, 'success');
        }

        function removeFromCart(index) {
            const item = cart[index];
            cart.splice(index, 1);
            updateCartUI();
            showCartMessage(`${item.name} removed from cart`, 'success');
        }

        function updateCartItemQuantity(index, change) {
            const item = cart[index];
            item.count += change;
            
            if (item.count <= 0) {
                removeFromCart(index);
                return;
            }
            
            item.totalPrice = item.count * item.price;
            updateCartUI();
        }

        function calculateCustomBlendPrice(blendData) {
            const basePrice = pricingData.radish[blendData.quantity];
            return Math.round(basePrice * 1.2);
        }

        function clearCart() {
            if (cart.length === 0) return;
            
            if (confirm('Are you sure you want to clear your cart?')) {
                cart = [];
                updateCartUI();
                showCartMessage('Cart cleared!', 'success');
            }
        }

        // UI Update Functions
        function updateCartUI() {
            const cartCount = document.getElementById('cartCount');
            const cartEmpty = document.getElementById('cartEmpty');
            const cartItems = document.getElementById('cartItems');
            const cartFooter = document.getElementById('cartFooter');
            const cartSubtotal = document.getElementById('cartSubtotal');
            const cartTotal = document.getElementById('cartTotal');

            const totalItems = cart.reduce((sum, item) => sum + item.count, 0);
            cartCount.textContent = totalItems;
            
            if (cart.length === 0) {
                cartEmpty.style.display = 'block';
                cartItems.style.display = 'none';
                cartFooter.style.display = 'none';
            } else {
                cartEmpty.style.display = 'none';
                cartItems.style.display = 'block';
                cartFooter.style.display = 'block';
                
                cartItems.innerHTML = cart.map((item, index) => `
                    <div class="cart-item">
                        <div class="cart-item-icon">${item.icon}</div>
                        <div class="cart-item-details">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-quantity">Quantity: ${item.quantity}g</div>
                            <div class="cart-item-price">‚Çπ${item.price} each</div>
                            ${item.customBlend ? `<div class="cart-item-blend">Custom Blend: ${item.customBlend.summary}</div>` : ''}
                        </div>
                        <div class="cart-item-controls">
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, -1)" ${item.count <= 1 ? 'disabled' : ''}>-</button>
                                <span class="quantity-display">${item.count}</span>
                                <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, 1)">+</button>
                            </div>
                            <button class="remove-item" onclick="removeFromCart(${index})">Remove</button>
                        </div>
                        <div class="cart-item-price">‚Çπ${item.totalPrice}</div>
                    </div>
                `).join('');
            }

            const subtotal = cart.reduce((sum, item) => sum + item.totalPrice, 0);
            cartSubtotal.textContent = `‚Çπ${subtotal}`;
            cartTotal.textContent = `‚Çπ${subtotal + deliveryFee}`;
        }

        // Cart UI Controls
        function toggleCart() {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('cartOverlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            
            if (sidebar.classList.contains('open')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function closeCart() {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('cartOverlay');
            
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        function showCartMessage(message, type = 'success') {
            const messageEl = document.getElementById('cartMessage');
            const messageText = document.getElementById('cartMessageText');
            
            messageText.textContent = message;
            messageEl.className = `cart-message ${type}`;
            messageEl.classList.add('show');
            
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 3000);
        }

        // Checkout Process
        function proceedToCheckout() {
            if (cart.length === 0) {
                showCartMessage('Your cart is empty!', 'error');
                return;
            }
            
            const phoneNumber = '919618571131';
            const subtotal = cart.reduce((sum, item) => sum + item.totalPrice, 0);
            const total = subtotal + deliveryFee;
            const estimatedDelivery = getEstimatedDelivery();
            
            let orderMessage = `üå± *New Order from Leaf Nest Website*\n\n`;
            orderMessage += `üìã *Order Details:*\n`;
            
            cart.forEach((item, index) => {
                orderMessage += `${index + 1}. ${item.icon} ${item.name}\n`;
                orderMessage += `   Quantity: ${item.count}x @ ‚Çπ${item.price} each\n`;
                orderMessage += `   Total: ‚Çπ${item.totalPrice}\n`;
                if (item.customBlend) {
                    orderMessage += `   üåø Custom Blend: ${item.customBlend.summary}\n`;
                }
                orderMessage += `\n`;
            });
            
            orderMessage += `üí∞ *Payment Summary:*\n`;
            orderMessage += `Subtotal: ‚Çπ${subtotal}\n`;
            orderMessage += `Delivery Fee: ‚Çπ${deliveryFee}\n`;
            orderMessage += `*Grand Total: ‚Çπ${total}*\n\n`;
            
            orderMessage += `üöö *Estimated Delivery:* ${estimatedDelivery}\n`;
            orderMessage += `üìç *Please provide:*\n`;
            orderMessage += `‚Ä¢ Complete delivery address in Hyderabad\n`;
            orderMessage += `‚Ä¢ Contact number\n`;
            orderMessage += `‚Ä¢ Preferred delivery time (9 AM - 6 PM)\n\n`;
            
            orderMessage += `üí≥ *Payment:* Cash on Delivery\n\n`;
            orderMessage += `Thank you for choosing Leaf Nest! üåø\n`;
            orderMessage += `*"Where Health Takes Roots"*`;
            
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(orderMessage)}`;
            window.open(whatsappUrl, '_blank');
            
            showCartMessage('Opening WhatsApp to complete your order...', 'success');
            
            setTimeout(() => {
                if (confirm('Order sent! Would you like to clear your cart?')) {
                    clearCart();
                    closeCart();
                }
            }, 2000);
        }

        function getEstimatedDelivery() {
            const now = new Date();
            const currentHour = now.getHours();
            
            const deliveryDate = new Date();
            if (currentHour >= 18) {
                deliveryDate.setDate(deliveryDate.getDate() + 2);
            } else {
                deliveryDate.setDate(deliveryDate.getDate() + 1);
            }
            
            return deliveryDate.toLocaleDateString('en-IN', {
                weekday: 'long',
                month: 'short',
                day: 'numeric'
            });
        }

        // Nutrition Calculator Functions
        function calculateNutrition(microgreen) {
            const quantity = parseInt(document.getElementById(microgreen + '-quantity').value);
            const mineralKey = document.getElementById(microgreen + '-mineral').value;
            const resultElement = document.getElementById(microgreen + '-result');
            
            const microgreenData = nutritionData[microgreen];
            if (microgreenData && microgreenData[mineralKey]) {
                const mineralInfo = microgreenData[mineralKey];
                const baseValue = mineralInfo.value;
                const unit = mineralInfo.unit;
                const name = document.querySelector(`#${microgreen}-mineral option[value="${mineralKey}"]`).textContent;

                const calculatedValue = (baseValue * quantity / 100).toFixed(2).replace(/\.00$/, '');
                
                resultElement.innerHTML = `<span class="result-value">${calculatedValue}</span><span class="result-unit">${unit} ${name}</span>`;
            }
        }

        // Custom Blend Functions
        let activeMicrogreens = [];

        function toggleMicrogreen(name) {
            const isChecked = document.getElementById(`${name}-check`).checked;
            const sliderDiv = document.getElementById(`${name}-slider`);
            const controlDiv = document.getElementById(`${name}-control`);

            if (isChecked) {
                sliderDiv.classList.add('active');
                controlDiv.classList.add('active');
                activeMicrogreens.push(name);
            } else {
                sliderDiv.classList.remove('active');
                controlDiv.classList.remove('active');
                activeMicrogreens = activeMicrogreens.filter(item => item !== name);
                document.getElementById(`${name}-range`).value = 0;
            }
            distributePercentages();
        }

        function updatePercentage(changedName) {
            distributePercentages(changedName);
        }

        function distributePercentages(changedName = null) {
            if (activeMicrogreens.length === 0) {
                updateBlendNutrition();
                return;
            }

            let totalPercent = 100;
            let lockedValue = 0;

            if (changedName) {
                lockedValue = parseInt(document.getElementById(`${changedName}-range`).value);
                totalPercent -= lockedValue;
            }
            
            let remainingGreens = activeMicrogreens.filter(name => name !== changedName);
            let equalShare = remainingGreens.length > 0 ? totalPercent / remainingGreens.length : 0;

            if (totalPercent < 0) {
                lockedValue = 100;
                totalPercent = 0;
                equalShare = 0;
                document.getElementById(`${changedName}-range`).value = 100;
            }

            if (changedName) {
                document.getElementById(`${changedName}-percent`).textContent = `${lockedValue}%`;
            }

            remainingGreens.forEach(name => {
                document.getElementById(`${name}-range`).value = equalShare;
                document.getElementById(`${name}-percent`).textContent = `${Math.round(equalShare)}%`;
            });
            
            let currentTotal = 0;
            activeMicrogreens.forEach(name => {
                currentTotal += Math.round(parseFloat(document.getElementById(`${name}-range`).value));
            });
            
            if (currentTotal !== 100 && activeMicrogreens.length > 0) {
                let difference = 100 - currentTotal;
                let targetSlider = changedName ? remainingGreens[0] : activeMicrogreens[0];
                if (targetSlider) {
                    let currentValue = parseFloat(document.getElementById(`${targetSlider}-range`).value);
                    document.getElementById(`${targetSlider}-range`).value = currentValue + difference;
                    document.getElementById(`${targetSlider}-percent`).textContent = `${Math.round(currentValue + difference)}%`;
                }
            }
            
            updateBlendNutrition();
        }

        function updateBlendNutrition() {
            const quantity = parseInt(document.getElementById('blend-quantity').value);
            const summaryDiv = document.getElementById('blend-summary');

            let totals = {
                'vitamin-c': 0, 'protein': 0, 'iron': 0, 'fiber': 0,
                'vitamin-k': 0, 'calcium': 0, 'vitamin-a': 0, 'folate': 0
            };
            let summaryText = [];

            if (activeMicrogreens.length === 0) {
                summaryDiv.textContent = 'Select microgreens to create your blend.';
            } else {
                activeMicrogreens.forEach(name => {
                    const percentage = parseInt(document.getElementById(`${name}-range`).value);
                    const weight = (quantity * percentage) / 100;
                    
                    if (percentage > 0) {
                        const nameCapitalized = name.charAt(0).toUpperCase() + name.slice(1);
                        summaryText.push(`${nameCapitalized}: ${percentage}%`);
                    }

                    if (!nutritionData[name]) return;
                    
                    totals['vitamin-c'] += (nutritionData[name]['vitamin-c']?.value || 0) * (weight / 100);
                    totals['protein'] += (nutritionData[name]['protein']?.value || 0) * (weight / 100);
                    totals['iron'] += (nutritionData[name]['iron']?.value || 0) * (weight / 100);
                    totals['fiber'] += (nutritionData[name]['fiber']?.value || 0) * (weight / 100);
                    totals['vitamin-k'] += (nutritionData[name]['vitamin-k']?.value || 0) * (weight / 100);
                    totals['calcium'] += (nutritionData[name]['calcium']?.value || 0) * (weight / 100);
                    totals['vitamin-a'] += (nutritionData[name]['vitamin-a']?.value || 0) * (weight / 100);
                    totals['folate'] += (nutritionData[name]['folate']?.value || 0) * (weight / 100);
                });
                summaryDiv.textContent = summaryText.join(' | ');
            }

            document.getElementById('blend-vitamin-c').textContent = `${totals['vitamin-c'].toFixed(1)} mg`;
            document.getElementById('blend-protein').textContent = `${totals['protein'].toFixed(1)} g`;
            document.getElementById('blend-iron').textContent = `${totals['iron'].toFixed(1)} mg`;
            document.getElementById('blend-fiber').textContent = `${totals['fiber'].toFixed(1)} g`;
            document.getElementById('blend-vitamin-k').textContent = `${totals['vitamin-k'].toFixed(1)} mcg`;
            document.getElementById('blend-calcium').textContent = `${totals['calcium'].toFixed(1)} mg`;
            document.getElementById('blend-vitamin-a').textContent = `${totals['vitamin-a'].toFixed(1)} mcg`;
            document.getElementById('blend-folate').textContent = `${totals['folate'].toFixed(1)} mcg`;
        }

        function addCustomBlendFromCalculator() {
            const activeMicrogreens = [];
            let totalPercentage = 0;
            
            const microgreenTypes = ['radish', 'pea', 'sunflower', 'purple', 'broccoli', 'arugula', 'kale', 'beetroot', 'mustard', 'cilantro', 'wheatgrass'];
            
            microgreenTypes.forEach(type => {
                const checkbox = document.getElementById(`${type}-check`);
                const range = document.getElementById(`${type}-range`);
                
                if (checkbox && checkbox.checked && range && parseInt(range.value) > 0) {
                    const percentage = parseInt(range.value);
                    activeMicrogreens.push({
                        type: type,
                        name: productInfo[type].name,
                        percentage: percentage
                    });
                    totalPercentage += percentage;
                }
            });
            
            if (activeMicrogreens.length === 0) {
                showCartMessage('Please select microgreens for your blend!', 'error');
                return;
            }
            
            if (Math.abs(totalPercentage - 100) > 1) {
                showCartMessage('Blend percentages must total 100%!', 'error');
                return;
            }
            
            const quantitySelect = document.getElementById('blend-quantity');
            const quantity = quantitySelect ? parseInt(quantitySelect.value) : 100;
            
            const summary = activeMicrogreens
                .map(mg => `${mg.name} ${mg.percentage}%`)
                .join(', ');
            
            const customBlend = {
                quantity: quantity,
                summary: summary,
                components: activeMicrogreens.reduce((acc, mg) => {
                    acc[mg.type] = mg.percentage;
                    return acc;
                }, {})
            };
            
            addToCart('custom-blend', 'Custom Blend', 'üåø', customBlend);
        }

        // Mobile menu functionality
        let mobileMenuOpen = false;
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const menuBtn = document.querySelector('.mobile-menu-btn');
            mobileNav.classList.toggle('active');
            menuBtn.classList.toggle('active');
            mobileMenuOpen = !mobileMenuOpen;
        }
        function closeMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const menuBtn = document.querySelector('.mobile-menu-btn');
            mobileNav.classList.remove('active');
            menuBtn.classList.remove('active');
            mobileMenuOpen = false;
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateCartUI();
            
            // Initialize all individual calculators on page load
            const microgreens = ['radish', 'pea', 'sunflower', 'purple', 'broccoli', 'arugula', 'kale', 'beetroot', 'mustard', 'cilantro', 'wheatgrass'];
            microgreens.forEach(mg => {
                if (document.getElementById(`${mg}-quantity`)) {
                    calculateNutrition(mg);
                }
            });
            updateBlendNutrition();
            
            // Add event listeners for ESC key to close cart
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeCart();
                }
            });
        });

        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) closeMobileMenu();
        });

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(44, 85, 48, 0.95)';
            } else {
                header.style.background = 'linear-gradient(135deg, #2c5530 0%, #4a7c59 100%)';
            }
        });
    </script>
</body>
</html>
